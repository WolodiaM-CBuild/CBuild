\hypertarget{register_8cpp_source}{}\doxysection{register.\+cpp}
\label{register_8cpp_source}\index{CBuild/CBuild/src/register.cpp@{CBuild/CBuild/src/register.cpp}}
\mbox{\hyperlink{register_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00001}00001 }
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00023}00023 \textcolor{comment}{// C++ libraries}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00024}00024 \textcolor{preprocessor}{\#include "{}../../headers/map.hpp"{}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00025}00025 \textcolor{preprocessor}{\#include "{}../../headers/filesystem++.hpp"{}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00026}00026 \textcolor{comment}{// Project headers}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00027}00027 \textcolor{preprocessor}{\#include "{}../../headers/register.hpp"{}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00028}00028 \textcolor{preprocessor}{\#include "{}../../headers/build/g++.hpp"{}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00029}00029 \textcolor{preprocessor}{\#include "{}../../headers/CBuild\_defs.hpp"{}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00030}00030 \textcolor{comment}{/* Custom tasks */}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00031}00031 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceCBuild}{CBuild}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00032}00032 \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00036}\mbox{\hyperlink{classCBuild_1_1Help}{00036}}     \textcolor{keyword}{class }\mbox{\hyperlink{classCBuild_1_1Help}{Help}} : \textcolor{keyword}{public} \mbox{\hyperlink{classCBuild_1_1Task}{CBuild::Task}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00037}00037     \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00038}00038     \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00039}00039         \textcolor{comment}{// Init with id, no requirments}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00040}\mbox{\hyperlink{classCBuild_1_1Help_a183dcc38e321e9ebffff251986a41af5}{00040}}         \mbox{\hyperlink{classCBuild_1_1Help_a183dcc38e321e9ebffff251986a41af5}{Help}}() : \mbox{\hyperlink{classCBuild_1_1Task}{Task}}(\textcolor{stringliteral}{"{}CBuild\_help"{}}, \{\}) \{\}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00041}00041         \textcolor{comment}{// Call, print all help messages}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00042}\mbox{\hyperlink{classCBuild_1_1Help_a9a05b5e28b3dbdf56a882a6e3208f5c7}{00042}}         \textcolor{keywordtype}{void} \mbox{\hyperlink{classCBuild_1_1Help_a9a05b5e28b3dbdf56a882a6e3208f5c7}{call}}(std::vector<std::string> \_\_attribute\_maybe\_unused\_\_)}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00043}00043         \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00044}00044             puts(\textcolor{stringliteral}{"{}\(\backslash\)nArguments:"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00045}00045             puts(\textcolor{stringliteral}{"{}-\/a <argument> -\/> set argument to task or toolchain"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00046}00046             puts(\textcolor{stringliteral}{"{}-\/pa <argument> -\/> set argument to runned app (only for -\/r, -\/br and -\/d)"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00047}00047             puts(\textcolor{stringliteral}{"{}-\/-\/init -\/> init worksapce"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00048}00048             puts(\textcolor{stringliteral}{"{}-\/-\/help -\/> this message"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00049}00049             puts(\textcolor{stringliteral}{"{}-\/m <task name> -\/> call task with specified id"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00050}00050             puts(\textcolor{stringliteral}{"{}-\/b [toolchain name] -\/> call toolchain with specified name or all if nothing specified in build mode"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00051}00051             puts(\textcolor{stringliteral}{"{}-\/r [toolchain name] -\/> call toolchain with specified name or all if nothing specified in run mode"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00052}00052             puts(\textcolor{stringliteral}{"{}-\/d [toolchain name] -\/> call toolchain with specified name or all if nothing specified in debug mode"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00053}00053             puts(\textcolor{stringliteral}{"{}-\/br [toolchain name] -\/> call toolchain with specified name or all if nothing specified in build mode and then in run mode"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00054}00054             puts(\textcolor{stringliteral}{"{}-\/f -\/> force rebuild files, ignore cache"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00055}00055             puts(\textcolor{stringliteral}{"{}-\/gm -\/> generate Makefile from toolchain execution, example:"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00056}00056             puts(\textcolor{stringliteral}{"{}./CBuild.run -\/gm -\/f -\/b app"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00057}00057             puts(\textcolor{stringliteral}{"{}It builds app in force mode and generate Makefile based on this, note, that only shell command will be in Makefile, so, not caching or other fancy thing. Also Makefile will not necessary be easy to read."{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00058}00058             puts(\textcolor{stringliteral}{"{}Directories:"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00059}00059             puts(\textcolor{stringliteral}{"{}build/<toolchain\_name>/out -\/> output directory of tollchain with toolchain\_name"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00060}00060             puts(\textcolor{stringliteral}{"{}CBuild/cache/tmp -\/> temporary copy cache"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00061}00061             puts(\textcolor{stringliteral}{"{}CBuild/cache/hash/<toolchain\_name> -\/> hash files of toolchain with toolchain\_name"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00062}00062             puts(\textcolor{stringliteral}{"{}build/<toolhain\_name>/objs -\/> object files generated by toolchain with toolchain\_name name"{}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00063}00063         \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00064}00064     \};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00068}\mbox{\hyperlink{classCBuild_1_1Init}{00068}}     \textcolor{keyword}{class }\mbox{\hyperlink{classCBuild_1_1Init}{Init}} : \textcolor{keyword}{public} \mbox{\hyperlink{classCBuild_1_1Task}{CBuild::Task}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00069}00069     \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00070}00070     \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00071}\mbox{\hyperlink{classCBuild_1_1Init_ade0fbda6a233dc426cf593be3e70222f}{00071}}         \mbox{\hyperlink{classCBuild_1_1Init_ade0fbda6a233dc426cf593be3e70222f}{Init}}() : \mbox{\hyperlink{classCBuild_1_1Task}{Task}}(\textcolor{stringliteral}{"{}CBuild\_init"{}}, \{\}) \{\}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00072}\mbox{\hyperlink{classCBuild_1_1Init_aeafec43d7230135f1c9c69b1c2b9dec3}{00072}}         \textcolor{keywordtype}{void} \mbox{\hyperlink{classCBuild_1_1Init_aeafec43d7230135f1c9c69b1c2b9dec3}{call}}(std::vector<std::string> \_\_attribute\_maybe\_unused\_\_)}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00073}00073         \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00074}00074             \textcolor{comment}{// Check all directories, and create it if needed}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00075}00075             \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespaceCBuild_1_1fs_a15031cfab0809c7499e2c2e033d7cfdf}{CBuild::fs::exists}}(\mbox{\hyperlink{CBuild__defs_8hpp_afdf24158b48b2226dae2818dcbe3d90a}{CBUILD\_BUILD\_DIR}}))}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00076}00076                 \mbox{\hyperlink{namespaceCBuild_1_1fs_a1579893d0fe2547296ae5cad50d8b444}{CBuild::fs::create}}(\{\mbox{\hyperlink{CBuild__defs_8hpp_afdf24158b48b2226dae2818dcbe3d90a}{CBUILD\_BUILD\_DIR}}\}, \mbox{\hyperlink{namespaceCBuild_1_1fs_a76437b93b13f5404cbfb231ac74842aca147be5f09382f8628291195a291d6c22}{CBuild::fs::DIRECTORY}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00077}00077             \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespaceCBuild_1_1fs_a15031cfab0809c7499e2c2e033d7cfdf}{CBuild::fs::exists}}(\mbox{\hyperlink{CBuild__defs_8hpp_aa8742e6c197f4ee26782268f40cf4300}{CBUILD\_SCRIPTS\_DIR}}))}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00078}00078                 \mbox{\hyperlink{namespaceCBuild_1_1fs_a1579893d0fe2547296ae5cad50d8b444}{CBuild::fs::create}}(\{\mbox{\hyperlink{CBuild__defs_8hpp_aa8742e6c197f4ee26782268f40cf4300}{CBUILD\_SCRIPTS\_DIR}}\}, \mbox{\hyperlink{namespaceCBuild_1_1fs_a76437b93b13f5404cbfb231ac74842aca147be5f09382f8628291195a291d6c22}{CBuild::fs::DIRECTORY}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00079}00079             \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespaceCBuild_1_1fs_a15031cfab0809c7499e2c2e033d7cfdf}{CBuild::fs::exists}}(\mbox{\hyperlink{CBuild__defs_8hpp_ab0d61221c2cbb8a54d68db65df592532}{CBUILD\_CACHE\_DIR}}))}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00080}00080                 \mbox{\hyperlink{namespaceCBuild_1_1fs_a1579893d0fe2547296ae5cad50d8b444}{CBuild::fs::create}}(\{\mbox{\hyperlink{CBuild__defs_8hpp_ab0d61221c2cbb8a54d68db65df592532}{CBUILD\_CACHE\_DIR}}\}, \mbox{\hyperlink{namespaceCBuild_1_1fs_a76437b93b13f5404cbfb231ac74842aca147be5f09382f8628291195a291d6c22}{CBuild::fs::DIRECTORY}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00081}00081             \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespaceCBuild_1_1fs_a15031cfab0809c7499e2c2e033d7cfdf}{CBuild::fs::exists}}(\mbox{\hyperlink{CBuild__defs_8hpp_ab0d61221c2cbb8a54d68db65df592532}{CBUILD\_CACHE\_DIR}} + \textcolor{stringliteral}{"{}/"{}} + \mbox{\hyperlink{CBuild__defs_8hpp_a7bc97744c79e15b6260fbe0f6054bdd3}{CBUILD\_COPY\_CACHE\_DIR}}))}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00082}00082                 \mbox{\hyperlink{namespaceCBuild_1_1fs_a1579893d0fe2547296ae5cad50d8b444}{CBuild::fs::create}}(\{\mbox{\hyperlink{CBuild__defs_8hpp_ab0d61221c2cbb8a54d68db65df592532}{CBUILD\_CACHE\_DIR}} + \textcolor{stringliteral}{"{}/"{}} + \mbox{\hyperlink{CBuild__defs_8hpp_a7bc97744c79e15b6260fbe0f6054bdd3}{CBUILD\_COPY\_CACHE\_DIR}}\}, \mbox{\hyperlink{namespaceCBuild_1_1fs_a76437b93b13f5404cbfb231ac74842aca147be5f09382f8628291195a291d6c22}{CBuild::fs::DIRECTORY}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00083}00083         \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00084}00084     \};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00085}00085 \} \textcolor{comment}{// namespace CBuild}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00086}00086 \textcolor{comment}{/* namesapce Registry */}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00087}00087 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceCBuild}{CBuild}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00088}00088 \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00089}00089     \textcolor{keyword}{namespace }Registry}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00090}00090     \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00091}00091         \textcolor{comment}{// System tasks}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00092}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a898d68a1fde4c705d15ab0fa2d24f72c}{00092}}         \mbox{\hyperlink{classCBuild_1_1Help}{CBuild::Help}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a898d68a1fde4c705d15ab0fa2d24f72c}{help}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00093}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a127c9a77ac7122e3da3f35d0c9a6c207}{00093}}         \mbox{\hyperlink{classCBuild_1_1Init}{CBuild::Init}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a127c9a77ac7122e3da3f35d0c9a6c207}{initw}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00094}00094         \textcolor{comment}{// Registred data}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00095}00095         \textcolor{comment}{// Tasks pointers ;)}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00096}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a622b61aabaad12faedca87869fd5801f}{00096}}         \mbox{\hyperlink{classlib_1_1map}{lib::map<std::string, CBuild::Task *>}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a622b61aabaad12faedca87869fd5801f}{tasks}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00097}00097         \textcolor{comment}{// Executed tasks}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00098}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a7610e0427b2f16ddcd1cd7c01dc11229}{00098}}         \mbox{\hyperlink{classlib_1_1map}{lib::map<std::string, bool>}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a7610e0427b2f16ddcd1cd7c01dc11229}{task\_executed}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00099}00099         \textcolor{comment}{// Toolchains pointers ;)}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00100}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a9051b3f36a18fe20cfbda218824a950e}{00100}}         \mbox{\hyperlink{classlib_1_1map}{lib::map<std::string, CBuild::Toolchain *>}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a9051b3f36a18fe20cfbda218824a950e}{targets}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00101}00101         \textcolor{comment}{// Executed toolchains}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00102}\mbox{\hyperlink{namespaceCBuild_1_1Registry_aca54837e829e5a288440c5ec214b1843}{00102}}         \mbox{\hyperlink{classlib_1_1map}{lib::map<std::string, bool>}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_aca54837e829e5a288440c5ec214b1843}{target\_executed}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00103}00103         \textcolor{comment}{// Custom cmd line arguments to tasks mapping}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00104}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a9766563e4b786c01ab14376dd32eebe6}{00104}}         \mbox{\hyperlink{classlib_1_1map}{lib::map<std::string, std::string>}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a9766563e4b786c01ab14376dd32eebe6}{keywords}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00105}00105         \textcolor{comment}{// TODO other types ?}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00106}00106     \} \textcolor{comment}{// namespace Registry}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00107}00107 \} \textcolor{comment}{// namespace CBuild}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00108}00108 \textcolor{comment}{/* register.hpp */}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00109}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a9be19bd471349943095783bad96ed908}{00109}} \textcolor{keywordtype}{void} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a9be19bd471349943095783bad96ed908}{CBuild::Registry::init}}()}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00110}00110 \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00111}00111     \textcolor{comment}{// Register help task}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00112}00112     Registry::RegistryTask(\&\mbox{\hyperlink{namespaceCBuild_1_1Registry_a898d68a1fde4c705d15ab0fa2d24f72c}{CBuild::Registry::help}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00113}00113     \textcolor{comment}{// Register init task}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00114}00114     Registry::RegistryTask(\&\mbox{\hyperlink{namespaceCBuild_1_1Registry_a127c9a77ac7122e3da3f35d0c9a6c207}{CBuild::Registry::initw}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00115}00115 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00116}\mbox{\hyperlink{namespaceCBuild_1_1Registry_aa8c4c391fb32f5f30b506917151e3f5e}{00116}} \textcolor{keywordtype}{void} \mbox{\hyperlink{namespaceCBuild_1_1Registry_aa8c4c391fb32f5f30b506917151e3f5e}{CBuild::Registry::RegistryTask}}(\mbox{\hyperlink{classCBuild_1_1Task}{CBuild::Task}} *task)}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00117}00117 \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00118}00118     \textcolor{comment}{// Save task ptr connected to it's name}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00119}00119     Registry::tasks.push\_back\_check(task-\/>\mbox{\hyperlink{classCBuild_1_1Task_a22f75b4023d2bc430d11ff2c8f1b4405}{self\_name}}(), task);}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00120}00120     \textcolor{comment}{// Save task excution state connected to it's name}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00121}00121     Registry::task\_executed.push\_back(task-\/>\mbox{\hyperlink{classCBuild_1_1Task_a22f75b4023d2bc430d11ff2c8f1b4405}{self\_name}}(), \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00122}00122 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00123}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a51d72a89f7fa967febc3683eb2bead3c}{00123}} \textcolor{keywordtype}{void} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a51d72a89f7fa967febc3683eb2bead3c}{CBuild::Registry::CallTask}}(std::string name, std::vector<std::string> args)}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00124}00124 \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00125}00125     \textcolor{comment}{// Load executed state of task}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00126}00126     \textcolor{keyword}{auto} check = Registry::task\_executed.get\_ptr(name);}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00127}00127     \textcolor{comment}{// Check if task exixtst and wasn't executed}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00128}00128     \textcolor{keywordflow}{if} (check != NULL \&\& check-\/>data == \textcolor{keyword}{false})}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00129}00129     \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00130}00130         \textcolor{comment}{// Load task}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00131}00131         \textcolor{keyword}{auto} mod = Registry::tasks.get\_ptr(name);}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00132}00132         \textcolor{comment}{// Call all required tasks, recursion ;)}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00133}00133         \textcolor{keywordflow}{for} (std::string s : mod-\/>data-\/>self\_required())}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00134}00134         \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00135}00135             Registry::CallTask(s, args);}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00136}00136         \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00137}00137         \textcolor{comment}{// Call task}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00138}00138         mod-\/>data-\/>call(args);}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00139}00139         \textcolor{comment}{// Mark this task es exuted, very easy because of pointers ;)}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00140}00140         check-\/>data = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00141}00141     \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00142}00142     \textcolor{comment}{// Print error if task not found}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00143}00143     \textcolor{keywordflow}{if} (check == NULL)}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00144}00144         printf(\textcolor{stringliteral}{"{}Task \%s not found. Exiting ...\(\backslash\)n"{}}, name.c\_str());}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00145}00145 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00146}\mbox{\hyperlink{namespaceCBuild_1_1Registry_ad02f9738893f725b263013012f886f26}{00146}} \textcolor{keywordtype}{void} \mbox{\hyperlink{namespaceCBuild_1_1Registry_ad02f9738893f725b263013012f886f26}{CBuild::Registry::RegisterTarget}}(\mbox{\hyperlink{classCBuild_1_1Toolchain}{CBuild::Toolchain}} *target)}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00147}00147 \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00148}00148     \textcolor{comment}{// Save toolchain ptr connected to it's name}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00149}00149     Registry::targets.push\_back\_check(target-\/>\mbox{\hyperlink{classCBuild_1_1Toolchain_a2489c6794e28fd6a8143fedd506407a3}{get\_id}}(), target);}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00150}00150     \textcolor{comment}{// Save toolchain excution state connected to it's name}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00151}00151     Registry::task\_executed.push\_back(target-\/>\mbox{\hyperlink{classCBuild_1_1Toolchain_a2489c6794e28fd6a8143fedd506407a3}{get\_id}}(), \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00152}00152 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00153}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a2b1eddd86007d7ce185071dd004a5036}{00153}} \mbox{\hyperlink{classCBuild_1_1Toolchain}{CBuild::Toolchain}} *\mbox{\hyperlink{namespaceCBuild_1_1Registry_a2b1eddd86007d7ce185071dd004a5036}{CBuild::Registry::GetToolchain}}(std::string name, \textcolor{keywordtype}{bool} force)}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00154}00154 \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00155}00155     \textcolor{comment}{// If we not in force build}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00156}00156     \textcolor{keywordflow}{if} (!force)}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00157}00157     \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00158}00158         \textcolor{comment}{// Check if toolchain was executed before}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00159}00159         \textcolor{keyword}{auto} check = Registry::task\_executed.get\_ptr(name);}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00160}00160         \textcolor{keywordflow}{if} (check != NULL \&\& check-\/>data == \textcolor{keyword}{false})}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00161}00161         \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00162}00162             \textcolor{comment}{// Return toolchain pointer if not}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00163}00163             \textcolor{keyword}{auto} elem = Registry::targets.get\_ptr(name);}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00164}00164             \textcolor{comment}{// Mark toolcian as executed}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00165}00165             check-\/>data = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00166}00166             \textcolor{keywordflow}{return} elem-\/>data;}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00167}00167         \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00168}00168     \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00169}00169     \textcolor{comment}{// We in force build}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00170}00170     \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00171}00171     \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00172}00172         \textcolor{comment}{// Return toolchain ptr}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00173}00173         \textcolor{keyword}{auto} elem = Registry::targets.get\_ptr(name);}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00174}00174         \textcolor{keywordflow}{if} (elem != NULL) \textcolor{keywordflow}{return} elem-\/>data;}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00175}00175     \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00176}00176     \textcolor{comment}{// Some error occured}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00177}00177     \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00178}00178 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00179}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a80b8ee3e1ed5dba24027e6e486e599b1}{00179}} \mbox{\hyperlink{classlib_1_1map}{lib::map<std::string, CBuild::Toolchain *>}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a80b8ee3e1ed5dba24027e6e486e599b1}{CBuild::Registry::GetTargets}}()}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00180}00180 \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00181}00181     \textcolor{comment}{// Return raw map of toolchains, return copy}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00182}00182     \textcolor{keywordflow}{return} Registry::targets;}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00183}00183 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00184}\mbox{\hyperlink{namespaceCBuild_1_1Registry_ac2a13262b5b36758289f9cca42ce13e2}{00184}} \textcolor{keywordtype}{void} \mbox{\hyperlink{namespaceCBuild_1_1Registry_ac2a13262b5b36758289f9cca42ce13e2}{CBuild::Registry::RegisterKeyword}}(std::string key, \mbox{\hyperlink{classCBuild_1_1Task}{CBuild::Task}} *func)}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00185}00185 \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00186}00186     \textcolor{comment}{// Register task}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00187}00187     Registry::RegistryTask(func);}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00188}00188     \textcolor{comment}{// Connect argument to this task}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00189}00189     Registry::keywords.push\_back(key, func-\/>\mbox{\hyperlink{classCBuild_1_1Task_a22f75b4023d2bc430d11ff2c8f1b4405}{self\_name}}());}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00190}00190 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00191}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a6b538efddd82cdc95d1506fba6a93b59}{00191}} \mbox{\hyperlink{classlib_1_1map}{lib::map<std::string, std::string>}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a6b538efddd82cdc95d1506fba6a93b59}{CBuild::Registry::GetKeywordsList}}()}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00192}00192 \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00193}00193     \textcolor{comment}{// Return list of arguments}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00194}00194     \textcolor{keywordflow}{return} Registry::keywords;}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00195}00195 \}}

\end{DoxyCode}
