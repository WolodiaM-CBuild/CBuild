\hypertarget{register_8cpp_source}{}\doxysection{register.\+cpp}
\label{register_8cpp_source}\index{CBuild/CBuild/src/register.cpp@{CBuild/CBuild/src/register.cpp}}
\mbox{\hyperlink{register_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00001}00001 }
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00023}00023 \textcolor{comment}{// C++ libraries}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00024}00024 \textcolor{preprocessor}{\#include "{}../../headers/filesystem++.hpp"{}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00025}00025 \textcolor{preprocessor}{\#include "{}../../headers/map.hpp"{}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00026}00026 \textcolor{preprocessor}{\#include "{}string"{}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00027}00027 \textcolor{preprocessor}{\#include "{}vector"{}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00028}00028 \textcolor{comment}{// Project headers}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00029}00029 \textcolor{preprocessor}{\#include "{}../../headers/CBuild\_defs.hpp"{}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00030}00030 \textcolor{preprocessor}{\#include "{}../../headers/build/g++.hpp"{}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00031}00031 \textcolor{preprocessor}{\#include "{}../../headers/print.hpp"{}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00032}00032 \textcolor{preprocessor}{\#include "{}../../headers/register.hpp"{}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00033}00033 \textcolor{preprocessor}{\#include "{}../../headers/task/CBuild\_help\_task.hpp"{}}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00034}00034 \textcolor{comment}{/* Custom tasks */}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00035}00035 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceCBuild}{CBuild}} \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00039}\mbox{\hyperlink{classCBuild_1_1Init}{00039}} \textcolor{keyword}{class }\mbox{\hyperlink{classCBuild_1_1Init}{Init}} : \textcolor{keyword}{public} \mbox{\hyperlink{classCBuild_1_1Task}{CBuild::Task}} \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00040}00040 \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00041}\mbox{\hyperlink{classCBuild_1_1Init_ade0fbda6a233dc426cf593be3e70222f}{00041}}   \mbox{\hyperlink{classCBuild_1_1Init_ade0fbda6a233dc426cf593be3e70222f}{Init}}() : \mbox{\hyperlink{classCBuild_1_1Task}{Task}}(\textcolor{stringliteral}{"{}CBuild\_init"{}}, \{\}) \{\}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00042}\mbox{\hyperlink{classCBuild_1_1Init_aeafec43d7230135f1c9c69b1c2b9dec3}{00042}}   \textcolor{keywordtype}{void} \mbox{\hyperlink{classCBuild_1_1Init_aeafec43d7230135f1c9c69b1c2b9dec3}{call}}(std::vector<std::string> \_\_attribute\_maybe\_unused\_\_) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00043}00043     \textcolor{comment}{// Check all directories, and create it if needed}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00044}00044     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespaceCBuild_1_1fs_a15031cfab0809c7499e2c2e033d7cfdf}{CBuild::fs::exists}}(\mbox{\hyperlink{CBuild__defs_8hpp_afdf24158b48b2226dae2818dcbe3d90a}{CBUILD\_BUILD\_DIR}}))}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00045}00045       \mbox{\hyperlink{namespaceCBuild_1_1fs_a1579893d0fe2547296ae5cad50d8b444}{CBuild::fs::create}}(\{\mbox{\hyperlink{CBuild__defs_8hpp_afdf24158b48b2226dae2818dcbe3d90a}{CBUILD\_BUILD\_DIR}}\}, \mbox{\hyperlink{namespaceCBuild_1_1fs_a76437b93b13f5404cbfb231ac74842aca147be5f09382f8628291195a291d6c22}{CBuild::fs::DIRECTORY}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00046}00046     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespaceCBuild_1_1fs_a15031cfab0809c7499e2c2e033d7cfdf}{CBuild::fs::exists}}(\mbox{\hyperlink{CBuild__defs_8hpp_aa8742e6c197f4ee26782268f40cf4300}{CBUILD\_SCRIPTS\_DIR}}))}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00047}00047       \mbox{\hyperlink{namespaceCBuild_1_1fs_a1579893d0fe2547296ae5cad50d8b444}{CBuild::fs::create}}(\{\mbox{\hyperlink{CBuild__defs_8hpp_aa8742e6c197f4ee26782268f40cf4300}{CBUILD\_SCRIPTS\_DIR}}\}, \mbox{\hyperlink{namespaceCBuild_1_1fs_a76437b93b13f5404cbfb231ac74842aca147be5f09382f8628291195a291d6c22}{CBuild::fs::DIRECTORY}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00048}00048     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespaceCBuild_1_1fs_a15031cfab0809c7499e2c2e033d7cfdf}{CBuild::fs::exists}}(\mbox{\hyperlink{CBuild__defs_8hpp_ab0d61221c2cbb8a54d68db65df592532}{CBUILD\_CACHE\_DIR}}))}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00049}00049       \mbox{\hyperlink{namespaceCBuild_1_1fs_a1579893d0fe2547296ae5cad50d8b444}{CBuild::fs::create}}(\{\mbox{\hyperlink{CBuild__defs_8hpp_ab0d61221c2cbb8a54d68db65df592532}{CBUILD\_CACHE\_DIR}}\}, \mbox{\hyperlink{namespaceCBuild_1_1fs_a76437b93b13f5404cbfb231ac74842aca147be5f09382f8628291195a291d6c22}{CBuild::fs::DIRECTORY}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00050}00050     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespaceCBuild_1_1fs_a15031cfab0809c7499e2c2e033d7cfdf}{CBuild::fs::exists}}(\mbox{\hyperlink{CBuild__defs_8hpp_ab0d61221c2cbb8a54d68db65df592532}{CBUILD\_CACHE\_DIR}} + \textcolor{stringliteral}{"{}/"{}} + \mbox{\hyperlink{CBuild__defs_8hpp_a7bc97744c79e15b6260fbe0f6054bdd3}{CBUILD\_COPY\_CACHE\_DIR}}))}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00051}00051       \mbox{\hyperlink{namespaceCBuild_1_1fs_a1579893d0fe2547296ae5cad50d8b444}{CBuild::fs::create}}(\{\mbox{\hyperlink{CBuild__defs_8hpp_ab0d61221c2cbb8a54d68db65df592532}{CBUILD\_CACHE\_DIR}} + \textcolor{stringliteral}{"{}/"{}} + \mbox{\hyperlink{CBuild__defs_8hpp_a7bc97744c79e15b6260fbe0f6054bdd3}{CBUILD\_COPY\_CACHE\_DIR}}\},}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00052}00052                          \mbox{\hyperlink{namespaceCBuild_1_1fs_a76437b93b13f5404cbfb231ac74842aca147be5f09382f8628291195a291d6c22}{CBuild::fs::DIRECTORY}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00053}00053   \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00054}00054 \};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00055}00055 \} \textcolor{comment}{// namespace CBuild}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00056}00056 \textcolor{comment}{/* namesapce Registry */}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00057}00057 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceCBuild}{CBuild}} \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00058}00058 \textcolor{keyword}{namespace }Registry \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00059}00059 \textcolor{comment}{// System tasks}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00060}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a898d68a1fde4c705d15ab0fa2d24f72c}{00060}} \mbox{\hyperlink{classCBuild_1_1Help}{CBuild::Help}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a898d68a1fde4c705d15ab0fa2d24f72c}{help}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00061}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a127c9a77ac7122e3da3f35d0c9a6c207}{00061}} \mbox{\hyperlink{classCBuild_1_1Init}{CBuild::Init}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a127c9a77ac7122e3da3f35d0c9a6c207}{initw}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00062}00062 \textcolor{comment}{// Registred data}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00063}00063 \textcolor{comment}{// Tasks pointers ;)}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00064}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a622b61aabaad12faedca87869fd5801f}{00064}} \mbox{\hyperlink{classlib_1_1map}{lib::map<std::string, CBuild::Task *>}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a622b61aabaad12faedca87869fd5801f}{tasks}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00065}00065 \textcolor{comment}{// Executed tasks}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00066}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a7610e0427b2f16ddcd1cd7c01dc11229}{00066}} \mbox{\hyperlink{classlib_1_1map}{lib::map<std::string, bool>}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a7610e0427b2f16ddcd1cd7c01dc11229}{task\_executed}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00067}00067 \textcolor{comment}{// Toolchains pointers ;)}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00068}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a9051b3f36a18fe20cfbda218824a950e}{00068}} \mbox{\hyperlink{classlib_1_1map}{lib::map<std::string, CBuild::Toolchain *>}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a9051b3f36a18fe20cfbda218824a950e}{targets}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00069}00069 \textcolor{comment}{// Executed toolchains}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00070}\mbox{\hyperlink{namespaceCBuild_1_1Registry_aca54837e829e5a288440c5ec214b1843}{00070}} \mbox{\hyperlink{classlib_1_1map}{lib::map<std::string, bool>}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_aca54837e829e5a288440c5ec214b1843}{target\_executed}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00071}00071 \textcolor{comment}{// Custom cmd line arguments to tasks mapping}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00072}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a9766563e4b786c01ab14376dd32eebe6}{00072}} \mbox{\hyperlink{classlib_1_1map}{lib::map<std::string, std::string>}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a9766563e4b786c01ab14376dd32eebe6}{keywords}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00073}00073 \textcolor{comment}{// Custom rebuild name}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00074}\mbox{\hyperlink{namespaceCBuild_1_1Registry_ad570aea7d453a3bde5ea92fb3fa7ff2c}{00074}} std::string \mbox{\hyperlink{namespaceCBuild_1_1Registry_ad570aea7d453a3bde5ea92fb3fa7ff2c}{name}} = \textcolor{stringliteral}{"{}CBuild.run"{}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00075}00075 \textcolor{comment}{// Custom rebuild args}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00076}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a6eca36fd6b4fd820647efb4a0012827d}{00076}} std::vector<std::string> \mbox{\hyperlink{namespaceCBuild_1_1Registry_a6eca36fd6b4fd820647efb4a0012827d}{cargs}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00077}\mbox{\hyperlink{namespaceCBuild_1_1Registry_ae3c7a25d9c3252f87f44510df585e057}{00077}} std::vector<std::string> \mbox{\hyperlink{namespaceCBuild_1_1Registry_ae3c7a25d9c3252f87f44510df585e057}{largs}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00078}00078 \textcolor{comment}{// TODO other types ?}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00079}00079 \} \textcolor{comment}{// namespace Registry}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00080}00080 \} \textcolor{comment}{// namespace CBuild}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00081}00081 \textcolor{comment}{/* register.hpp */}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00082}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a9be19bd471349943095783bad96ed908}{00082}} \textcolor{keywordtype}{void} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a9be19bd471349943095783bad96ed908}{CBuild::Registry::init}}() \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00083}00083   \textcolor{comment}{// Register help task}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00084}00084   \mbox{\hyperlink{namespaceCBuild_1_1Registry_aa8c4c391fb32f5f30b506917151e3f5e}{Registry::RegistryTask}}(\&\mbox{\hyperlink{namespaceCBuild_1_1Registry_a898d68a1fde4c705d15ab0fa2d24f72c}{CBuild::Registry::help}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00085}00085   \textcolor{comment}{// Register init task}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00086}00086   \mbox{\hyperlink{namespaceCBuild_1_1Registry_aa8c4c391fb32f5f30b506917151e3f5e}{Registry::RegistryTask}}(\&\mbox{\hyperlink{namespaceCBuild_1_1Registry_a127c9a77ac7122e3da3f35d0c9a6c207}{CBuild::Registry::initw}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00087}00087 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00088}\mbox{\hyperlink{namespaceCBuild_1_1Registry_aa8c4c391fb32f5f30b506917151e3f5e}{00088}} \textcolor{keywordtype}{void} \mbox{\hyperlink{namespaceCBuild_1_1Registry_aa8c4c391fb32f5f30b506917151e3f5e}{CBuild::Registry::RegistryTask}}(\mbox{\hyperlink{classCBuild_1_1Task}{CBuild::Task}} *task) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00089}00089   \textcolor{comment}{// Save task ptr connected to it's name}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00090}00090   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00091}00091     \mbox{\hyperlink{namespaceCBuild_1_1Registry_a622b61aabaad12faedca87869fd5801f}{Registry::tasks}}.push\_back\_check(task-\/>\mbox{\hyperlink{classCBuild_1_1Task_a22f75b4023d2bc430d11ff2c8f1b4405}{self\_name}}(), task);}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00092}00092   \} \textcolor{keywordflow}{catch} (std::exception e) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00093}00093     \mbox{\hyperlink{namespaceCBuild_ac4072b567b20516e02402f3b95964953}{CBuild::print\_full}}(\textcolor{stringliteral}{"{}Error: trying to register task with the same id: "{}} +}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00094}00094                            task-\/>\mbox{\hyperlink{classCBuild_1_1Task_a22f75b4023d2bc430d11ff2c8f1b4405}{self\_name}}(),}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00095}00095                        \mbox{\hyperlink{namespaceCBuild_a3291e277899194e904c57c9133ff5025a54e1cf55ef36246337b32c5e614c5376}{CBuild::RED}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00096}00096   \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00097}00097   \textcolor{comment}{// Save task excution state connected to it's name}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00098}00098   \mbox{\hyperlink{namespaceCBuild_1_1Registry_a7610e0427b2f16ddcd1cd7c01dc11229}{Registry::task\_executed}}.push\_back(task-\/>\mbox{\hyperlink{classCBuild_1_1Task_a22f75b4023d2bc430d11ff2c8f1b4405}{self\_name}}(), \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00099}00099 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00100}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a51d72a89f7fa967febc3683eb2bead3c}{00100}} \textcolor{keywordtype}{void} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a51d72a89f7fa967febc3683eb2bead3c}{CBuild::Registry::CallTask}}(std::string \mbox{\hyperlink{namespaceCBuild_1_1Registry_ad570aea7d453a3bde5ea92fb3fa7ff2c}{name}},}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00101}00101                                 std::vector<std::string> args) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00102}00102   \textcolor{comment}{// Load executed state of task}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00103}00103   \textcolor{keyword}{auto} check = \mbox{\hyperlink{namespaceCBuild_1_1Registry_a7610e0427b2f16ddcd1cd7c01dc11229}{Registry::task\_executed}}.get\_ptr(\mbox{\hyperlink{namespaceCBuild_1_1Registry_ad570aea7d453a3bde5ea92fb3fa7ff2c}{name}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00104}00104   \textcolor{comment}{// Check if task exixtst and wasn't executed}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00105}00105   \textcolor{keywordflow}{if} (check != NULL \&\& check-\/>data == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00106}00106     \textcolor{comment}{// Load task}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00107}00107     \textcolor{keyword}{auto} mod = \mbox{\hyperlink{namespaceCBuild_1_1Registry_a622b61aabaad12faedca87869fd5801f}{Registry::tasks}}.get\_ptr(\mbox{\hyperlink{namespaceCBuild_1_1Registry_ad570aea7d453a3bde5ea92fb3fa7ff2c}{name}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00108}00108     \textcolor{comment}{// Call all required tasks, recursion ;)}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00109}00109     \textcolor{keywordflow}{for} (std::string s : mod-\/>data-\/>self\_required()) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00110}00110       \mbox{\hyperlink{namespaceCBuild_1_1Registry_a51d72a89f7fa967febc3683eb2bead3c}{Registry::CallTask}}(s, args);}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00111}00111     \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00112}00112     \textcolor{comment}{// Call task}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00113}00113     mod-\/>data-\/>call(args);}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00114}00114     \textcolor{comment}{// Mark this task es exuted, very easy because of pointers ;)}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00115}00115     check-\/>data = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00116}00116   \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00117}00117   \textcolor{comment}{// Print error if task not found}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00118}00118   \textcolor{keywordflow}{if} (check == NULL)}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00119}00119     \mbox{\hyperlink{namespaceCBuild_a28dd2faae5a0a378163e73ec858d5bb7}{CBuild::print}}(\textcolor{stringliteral}{"{}Task"{}} + \mbox{\hyperlink{namespaceCBuild_1_1Registry_ad570aea7d453a3bde5ea92fb3fa7ff2c}{name}} + \textcolor{stringliteral}{"{}not found. Exiting ..."{}}, \mbox{\hyperlink{namespaceCBuild_a3291e277899194e904c57c9133ff5025a54e1cf55ef36246337b32c5e614c5376}{CBuild::RED}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00120}00120 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00121}\mbox{\hyperlink{namespaceCBuild_1_1Registry_ad02f9738893f725b263013012f886f26}{00121}} \textcolor{keywordtype}{void} \mbox{\hyperlink{namespaceCBuild_1_1Registry_ad02f9738893f725b263013012f886f26}{CBuild::Registry::RegisterTarget}}(\mbox{\hyperlink{classCBuild_1_1Toolchain}{CBuild::Toolchain}} *target) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00122}00122   \textcolor{comment}{// Save toolchain ptr connected to it's name}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00123}00123   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00124}00124     \mbox{\hyperlink{namespaceCBuild_1_1Registry_a9051b3f36a18fe20cfbda218824a950e}{Registry::targets}}.push\_back\_check(target-\/>\mbox{\hyperlink{classCBuild_1_1Toolchain_a0fc948049659930b087bf93ccc1a6f1a}{get\_id}}(), target);}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00125}00125   \} \textcolor{keywordflow}{catch} (std::exception e) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00126}00126     \mbox{\hyperlink{namespaceCBuild_ac4072b567b20516e02402f3b95964953}{CBuild::print\_full}}(}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00127}00127         \textcolor{stringliteral}{"{}Error: trying to register toolchain with the same id: "{}} +}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00128}00128             target-\/>\mbox{\hyperlink{classCBuild_1_1Toolchain_a0fc948049659930b087bf93ccc1a6f1a}{get\_id}}(),}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00129}00129         \mbox{\hyperlink{namespaceCBuild_a3291e277899194e904c57c9133ff5025a54e1cf55ef36246337b32c5e614c5376}{CBuild::RED}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00130}00130   \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00131}00131   \textcolor{comment}{// Save toolchain excution state connected to it's name}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00132}00132   \mbox{\hyperlink{namespaceCBuild_1_1Registry_a7610e0427b2f16ddcd1cd7c01dc11229}{Registry::task\_executed}}.push\_back(target-\/>\mbox{\hyperlink{classCBuild_1_1Toolchain_a0fc948049659930b087bf93ccc1a6f1a}{get\_id}}(), \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00133}00133 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00134}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a2b1eddd86007d7ce185071dd004a5036}{00134}} \mbox{\hyperlink{classCBuild_1_1Toolchain}{CBuild::Toolchain}} *\mbox{\hyperlink{namespaceCBuild_1_1Registry_a2b1eddd86007d7ce185071dd004a5036}{CBuild::Registry::GetToolchain}}(std::string \mbox{\hyperlink{namespaceCBuild_1_1Registry_ad570aea7d453a3bde5ea92fb3fa7ff2c}{name}},}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00135}00135                                                   \textcolor{keywordtype}{bool} force) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00136}00136   \textcolor{comment}{// If we not in force build}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00137}00137   \textcolor{keywordflow}{if} (!force) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00138}00138     \textcolor{comment}{// Check if toolchain was executed before}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00139}00139     \textcolor{keyword}{auto} check = \mbox{\hyperlink{namespaceCBuild_1_1Registry_a7610e0427b2f16ddcd1cd7c01dc11229}{Registry::task\_executed}}.get\_ptr(\mbox{\hyperlink{namespaceCBuild_1_1Registry_ad570aea7d453a3bde5ea92fb3fa7ff2c}{name}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00140}00140     \textcolor{keywordflow}{if} (check != NULL \&\& check-\/>data == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00141}00141       \textcolor{comment}{// Return toolchain pointer if not}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00142}00142       \textcolor{keyword}{auto} elem = \mbox{\hyperlink{namespaceCBuild_1_1Registry_a9051b3f36a18fe20cfbda218824a950e}{Registry::targets}}.get\_ptr(\mbox{\hyperlink{namespaceCBuild_1_1Registry_ad570aea7d453a3bde5ea92fb3fa7ff2c}{name}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00143}00143       \textcolor{comment}{// Mark toolcian as executed}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00144}00144       check-\/>data = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00145}00145       \textcolor{keywordflow}{return} elem-\/>data;}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00146}00146     \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00147}00147   \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00148}00148   \textcolor{comment}{// We in force build}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00149}00149   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00150}00150     \textcolor{comment}{// Return toolchain ptr}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00151}00151     \textcolor{keyword}{auto} elem = \mbox{\hyperlink{namespaceCBuild_1_1Registry_a9051b3f36a18fe20cfbda218824a950e}{Registry::targets}}.get\_ptr(\mbox{\hyperlink{namespaceCBuild_1_1Registry_ad570aea7d453a3bde5ea92fb3fa7ff2c}{name}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00152}00152     \textcolor{keywordflow}{if} (elem != NULL)}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00153}00153       \textcolor{keywordflow}{return} elem-\/>data;}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00154}00154   \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00155}00155   \textcolor{comment}{// Some error occured}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00156}00156   \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00157}00157 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00158}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a80b8ee3e1ed5dba24027e6e486e599b1}{00158}} \mbox{\hyperlink{classlib_1_1map}{lib::map<std::string, CBuild::Toolchain *>}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a80b8ee3e1ed5dba24027e6e486e599b1}{CBuild::Registry::GetTargets}}() \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00159}00159   \textcolor{comment}{// Return raw map of toolchains, return copy}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00160}00160   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a9051b3f36a18fe20cfbda218824a950e}{Registry::targets}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00161}00161 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00162}\mbox{\hyperlink{namespaceCBuild_1_1Registry_ac2a13262b5b36758289f9cca42ce13e2}{00162}} \textcolor{keywordtype}{void} \mbox{\hyperlink{namespaceCBuild_1_1Registry_ac2a13262b5b36758289f9cca42ce13e2}{CBuild::Registry::RegisterKeyword}}(std::string key, \mbox{\hyperlink{classCBuild_1_1Task}{CBuild::Task}} *func) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00163}00163   \textcolor{comment}{// Register task}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00164}00164   \mbox{\hyperlink{namespaceCBuild_1_1Registry_aa8c4c391fb32f5f30b506917151e3f5e}{Registry::RegistryTask}}(func);}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00165}00165   \textcolor{comment}{// Connect argument to this task}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00166}00166   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00167}00167     \mbox{\hyperlink{namespaceCBuild_1_1Registry_a9766563e4b786c01ab14376dd32eebe6}{Registry::keywords}}.push\_back\_check(key, func-\/>\mbox{\hyperlink{classCBuild_1_1Task_a22f75b4023d2bc430d11ff2c8f1b4405}{self\_name}}());}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00168}00168   \} \textcolor{keywordflow}{catch} (std::exception e) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00169}00169     \mbox{\hyperlink{namespaceCBuild_ac4072b567b20516e02402f3b95964953}{CBuild::print\_full}}(\textcolor{stringliteral}{"{}Error: trying to register simmilar keyword: "{}} + key,}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00170}00170                        \mbox{\hyperlink{namespaceCBuild_a3291e277899194e904c57c9133ff5025a54e1cf55ef36246337b32c5e614c5376}{CBuild::RED}});}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00171}00171   \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00172}00172 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00173}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a6b538efddd82cdc95d1506fba6a93b59}{00173}} \mbox{\hyperlink{classlib_1_1map}{lib::map<std::string, std::string>}} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a6b538efddd82cdc95d1506fba6a93b59}{CBuild::Registry::GetKeywordsList}}() \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00174}00174   \textcolor{comment}{// Return list of arguments}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00175}00175   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a9766563e4b786c01ab14376dd32eebe6}{Registry::keywords}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00176}00176 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00177}00177 }
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00178}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a52caf93d8f2358ace59cf256f3ed6ebf}{00178}} \textcolor{keywordtype}{void} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a52caf93d8f2358ace59cf256f3ed6ebf}{CBuild::Registry::SetRebuildName}}(std::string \_name) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00179}00179   \textcolor{comment}{// Save name}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00180}00180   \mbox{\hyperlink{namespaceCBuild_1_1Registry_ad570aea7d453a3bde5ea92fb3fa7ff2c}{Registry::name}} = \_name;}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00181}00181 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00182}\mbox{\hyperlink{namespaceCBuild_1_1Registry_a552d1c75543fd4b4c1bbe19e011a6a22}{00182}} \textcolor{keywordtype}{void} \mbox{\hyperlink{namespaceCBuild_1_1Registry_a552d1c75543fd4b4c1bbe19e011a6a22}{CBuild::Registry::AddLinkArg}}(std::string arg) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00183}00183   \textcolor{comment}{// Add argument}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00184}00184   \mbox{\hyperlink{namespaceCBuild_1_1Registry_ae3c7a25d9c3252f87f44510df585e057}{Registry::largs}}.push\_back(arg);}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00185}00185 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00186}\mbox{\hyperlink{namespaceCBuild_1_1Registry_aad2852a78f5aa5c9f84dc53b065cdee8}{00186}} \textcolor{keywordtype}{void} \mbox{\hyperlink{namespaceCBuild_1_1Registry_aad2852a78f5aa5c9f84dc53b065cdee8}{CBuild::Registry::AddCompileArg}}(std::string arg) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00187}00187   \textcolor{comment}{// Add argument}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00188}00188   \mbox{\hyperlink{namespaceCBuild_1_1Registry_a6eca36fd6b4fd820647efb4a0012827d}{Registry::cargs}}.push\_back(arg);}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00189}00189 \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00190}\mbox{\hyperlink{namespaceCBuild_1_1Registry_aea482c73e78098645ac59484c470a378}{00190}} std::string \mbox{\hyperlink{namespaceCBuild_1_1Registry_aea482c73e78098645ac59484c470a378}{CBuild::Registry::GetRebuildArgs}}() \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00191}00191   \textcolor{comment}{// Return string}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00192}00192   std::string ret = \textcolor{stringliteral}{"{} \(\backslash\)"{}"{}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00193}00193   \textcolor{comment}{// Get compile args and pack it to workable string}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00194}00194   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} elem : \mbox{\hyperlink{namespaceCBuild_1_1Registry_a6eca36fd6b4fd820647efb4a0012827d}{Registry::cargs}}) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00195}00195     ret += elem;}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00196}00196     ret += \textcolor{stringliteral}{"{} "{}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00197}00197   \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00198}00198   ret += \textcolor{stringliteral}{"{} \(\backslash\)"{} \(\backslash\)"{} "{}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00199}00199   \textcolor{comment}{// Get link args and pack it to workable string}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00200}00200   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} elem : \mbox{\hyperlink{namespaceCBuild_1_1Registry_ae3c7a25d9c3252f87f44510df585e057}{Registry::largs}}) \{}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00201}00201     ret += elem;}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00202}00202     ret += \textcolor{stringliteral}{"{} "{}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00203}00203   \}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00204}00204   ret += \textcolor{stringliteral}{"{} \(\backslash\)"{} "{}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00205}00205   \textcolor{comment}{// Get name and pack it to workable string}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00206}00206   ret += \mbox{\hyperlink{namespaceCBuild_1_1Registry_ad570aea7d453a3bde5ea92fb3fa7ff2c}{Registry::name}};}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00207}00207   \textcolor{comment}{// Return string}}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00208}00208   \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{\Hypertarget{register_8cpp_source_l00209}00209 \}}

\end{DoxyCode}
